{% load static %}

<script src="{% static 'gnmawsgr/project_stuff.js' %}"></script>
{% if is_allowed %}
<script src="{% static 'gnmawsgr/functions.js' %}"></script>
<script>
  $(function() {
    $( "#dialog_{{ collection }}" ).dialog({
      autoOpen: false,
      width:480,
    });

    $( "#restore_{{ collection }}" ).click(function() {
      $( "#dialog_{{ collection }}" ).dialog( "open" );
      request_collection_restore("{% url gnmawsgr:request_collection %}?id={{ collection }}", "{% url gnmawsgr:bulk_status collection %}", "Project",  $("#dialog_{{ collection }}"));
    });

  });

</script>
{% endif %}

<script>
    var percentage_in_archive;

    $(document).ready(function(){
        $("#glacier_restore_button_container").hide();
        check_has_in_glacier("{% url gnmawsgr:projectinfo projectid=collection %}");
    });

</script>
<li>
    <div id="glacier_restore_button_loading">
        <img src="{% static 'img/icon-ajax-loader.gif' %}"><span id="gnmawsgr_loading_info" style="font-style: italic; font-size: 0.8em;"></span>
    </div>
    <div id="glacier_restore_button_container">
        <div style="display: block;">
            {% if is_allowed %}
            <button type="button" id="restore_{{ collection }}">Restore from Glacier</button>
            {% else %}
            <button type="button" id="disabled_restore_button" style="background-color: LightGrey;">Restore from Glacier</button>
            <span style="font-style: italic; text-align: right;">Only admins are allowed to restore entire projects from Glacier</span>
            {% endif %}
        </div>
        <div>
            <span class="gnmawsgr_info_text" id="info_text" style="font-style: italic; font-size: 0.8em;"></span>
        </div>
    </div>
</li>

<div id="dialog_{{ collection }}" title="Restore from Glacier">

</div>
